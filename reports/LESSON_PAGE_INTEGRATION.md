# ะะฝัะตะณัะฐัะธั ัััะฐะฝะธัั ััะพะบะฐ ั ะฑัะบะตะฝะดะพะผ

## ะงัะพ ะฑัะปะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ

### 1. API ะดะปั ัะฐะฑะพัั ั ััะพะบะฐะผะธ

**ะขะธะฟั (`frontend/src/shared/api/lessons/types.ts`):**

```typescript
export interface Lesson {
  id: string;
  title: string;
  content: string;
  order: number;
  status: LessonStatus;
  // ... ะดััะณะธะต ะฟะพะปั
}
```

**API ะผะตัะพะดั (`frontend/src/shared/api/lessons/api.ts`):**

```typescript
lessonsApi.getLessonById(id: string): Promise<Lesson>
```

### 2. Effector ะผะพะดะตะปั ะดะปั ััะพะบะฐ

**Store'ั:**

- `$currentLesson` - ัะตะบััะธะน ััะพะบ
- `$lessonLoading` - ััะฐััั ะทะฐะณััะทะบะธ
- `$lessonError` - ะพัะธะฑะบะฐ ะทะฐะณััะทะบะธ
- `$lessonNotFound` - ัะปะฐะณ "ััะพะบ ะฝะต ะฝะฐะนะดะตะฝ"

**Events:**

- `loadLesson(lessonId: string)` - ะทะฐะณััะทะธัั ััะพะบ
- `resetLesson()` - ัะฑัะพัะธัั ัะพััะพัะฝะธะต

**ะฅัะบ ะดะปั ะบะพะผะฟะพะฝะตะฝัะพะฒ:**

```typescript
const { lesson, loading, notFound } = useLesson(lessonId);
```

### 3. ะะฑะฝะพะฒะปะตะฝะฝัะน ะบะพะผะฟะพะฝะตะฝั LessonPage

**ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:**

- โ ะะพะปััะฐะตั `lessonId` ะธะท URL ะฟะฐัะฐะผะตััะพะฒ
- โ ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐะตั ััะพะบ ะฟัะธ ะผะพะฝัะธัะพะฒะฐะฝะธะธ
- โ ะะพะบะฐะทัะฒะฐะตั ะฟัะตะปะพะฐะดะตั ะฒะพ ะฒัะตะผั ะทะฐะณััะทะบะธ
- โ ะัะพะฑัะฐะถะฐะตั ัะตะฐะปัะฝัะต ะดะฐะฝะฝัะต ััะพะบะฐ (ะทะฐะณะพะปะพะฒะพะบ ะธ ะบะพะฝัะตะฝั)
- โ ะัะปะธ ััะพะบ ะฝะต ะฝะฐะนะดะตะฝ - ะฟะพะบะฐะทัะฒะฐะตั ะดะตะผะพ-ะบะพะฝัะตะฝั ั ัะฒะตะดะพะผะปะตะฝะธะตะผ
- โ ะกะฑัะฐััะฒะฐะตั ัะพััะพัะฝะธะต ะฟัะธ ัะฐะทะผะพะฝัะธัะพะฒะฐะฝะธะธ

## ะะพะณะธะบะฐ ัะฐะฑะพัั

### ะฃัะฟะตัะฝะฐั ะทะฐะณััะทะบะฐ ััะพะบะฐ

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตัะพะดะธั ะฝะฐ /courses/:courseId/lessons/:lessonId
2. LessonPage ะฟะพะปััะฐะตั lessonId ะธะท URL
3. useLesson ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐะตั ััะพะบ
4. ะะพะบะฐะทัะฒะฐะตััั ะฟัะตะปะพะฐะดะตั
5. ะะพัะปะต ะทะฐะณััะทะบะธ ะพัะพะฑัะฐะถะฐะตััั ัะตะฐะปัะฝัะน ะบะพะฝัะตะฝั ััะพะบะฐ
```

### ะฃัะพะบ ะฝะต ะฝะฐะนะดะตะฝ

```
1. API ะฒะพะทะฒัะฐัะฐะตั 404
2. $lessonNotFound = true
3. ะัะพะฑัะฐะถะฐะตััั Alert "ะฃัะพะบ ะฝะต ะฝะฐะนะดะตะฝ. ะะพะบะฐะทัะฒะฐะตะผ ะดะตะผะพ-ะบะพะฝัะตะฝั"
4. ะัะฟะพะปัะทัะตััั mockLessonContent ะธะท ัะฐะนะปะฐ model/mock.ts
```

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะกะพะทะดะฐะฝะธะต ะธ ะฟัะพัะผะพัั ััะพะบะฐ

1. **ะกะพะทะดะฐะนัะต ััะพะบ ัะตัะตะท ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ:**
   - ะะฐะถะผะธัะต "ะกะพะทะดะฐัั ััะพะบ"
   - ะะฐะฟะพะปะฝะธัะต ัะพัะผั
   - ะะพัะปะต ะณะตะฝะตัะฐัะธะธ ะฟัะพะธะทะพะนะดะตั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะตะดะธัะตะบั ะฝะฐ ัััะฐะฝะธัั ััะพะบะฐ

2. **ะัะพัะผะพัั ัััะตััะฒัััะตะณะพ ััะพะบะฐ:**
   - ะะตัะตะนะดะธัะต ะฟะพ URL `/courses/{courseId}/lessons/{lessonId}`
   - ะฃัะพะบ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะทะธััั ะธ ะพัะพะฑัะฐะทะธััั

### ะขะตััะธัะพะฒะฐะฝะธะต ั ะฝะตัััะตััะฒัััะธะผ ััะพะบะพะผ

```
ะัะบัะพะนัะต: /courses/any-id/lessons/non-existent-id
ะะตะทัะปััะฐั: ะะพะบะฐะถะตััั ะดะตะผะพ-ะบะพะฝัะตะฝั ั ัะฒะตะดะพะผะปะตะฝะธะตะผ
```

## ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
frontend/src/
โโโ shared/
โ   โโโ api/
โ   โ   โโโ lessons/
โ   โ       โโโ api.ts          # API ะผะตัะพะดั
โ   โ       โโโ types.ts        # TypeScript ัะธะฟั
โ   โ       โโโ index.ts        # ะญะบัะฟะพััั
โ   โโโ model/
โ       โโโ lessons/
โ           โโโ lessons-model.ts # Effector store'ั ะธ effects
โ           โโโ use-lesson.ts    # React ััะบ
โ           โโโ index.ts         # ะญะบัะฟะพััั
โโโ widgets/
    โโโ lesson/
        โโโ ui/
            โโโ LessonPage.tsx   # ะะฑะฝะพะฒะปะตะฝะฝัะน ะบะพะผะฟะพะฝะตะฝั
```

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะฐะณััะทะบะฐ ะดะฐะฝะฝัั

**ะัะบะตะฝะด ัะฝะดะฟะพะธะฝั:**

```
GET /courses/lessons/:id
```

**ะัะฒะตั:**

```json
{
  "id": "uuid",
  "title": "ะะฐะทะฒะฐะฝะธะต ััะพะบะฐ",
  "content": "Markdown ะบะพะฝัะตะฝั",
  "order": 1,
  "status": "not_started",
  "created_at": "2025-09-29T...",
  "updated_at": "2025-09-29T..."
}
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ

```typescript
// ะะฒัะพะผะฐัะธัะตัะบะฐั ะทะฐะณััะทะบะฐ ะฟัะธ ะผะพะฝัะธัะพะฒะฐะฝะธะธ
useEffect(() => {
  if (lessonId) {
    loadLesson(lessonId);
  }
  return () => {
    resetLesson(); // ะัะธััะบะฐ ะฟัะธ ัะฐะทะผะพะฝัะธัะพะฒะฐะฝะธะธ
  };
}, [lessonId]);
```

### Fallback ะฝะฐ ะดะตะผะพ-ะบะพะฝัะตะฝั

```typescript
const lessonContent = lesson?.content || mockLessonContent;
const lessonTitle = lesson?.title || 'ะะฒะตะดะตะฝะธะต ะฒ ะผะฐัะธะฝะฝะพะต ะพะฑััะตะฝะธะต';
```

## ะกะพััะพัะฝะธั ะบะพะผะฟะพะฝะตะฝัะฐ

### 1. ะะฐะณััะทะบะฐ (loading: true)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                             โ
โ    ๐  ะะฐะณััะทะบะฐ ััะพะบะฐ...    โ
โ                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 2. ะฃัะพะบ ะทะฐะณััะถะตะฝ (lesson: Lesson)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะตะฐะปัะฝะพะต ะฝะฐะทะฒะฐะฝะธะต ััะพะบะฐ    โ
โ                             โ
โ  [Markdown ะบะพะฝัะตะฝั ััะพะบะฐ]   โ
โ                             โ
โ  [ะะ-ะฟะพะผะพัะฝะธะบ]             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 3. ะฃัะพะบ ะฝะต ะฝะฐะนะดะตะฝ (notFound: true)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะฒะตะดะตะฝะธะต ะฒ ะะ (ะดะตะผะพ)       โ
โ  โน๏ธ ะฃัะพะบ ะฝะต ะฝะฐะนะดะตะฝ.         โ
โ     ะะพะบะฐะทัะฒะฐะตะผ ะดะตะผะพ-ะบะพะฝัะตะฝั โ
โ                             โ
โ  [ะะตะผะพ markdown ะบะพะฝัะตะฝั]    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะัะดััะธะต ัะปัััะตะฝะธั

- [ ] ะะพะฑะฐะฒะธัั ะฝะฐะฒะธะณะฐัะธั ะผะตะถะดั ััะพะบะฐะผะธ
- [ ] ะะพะบะฐะทัะฒะฐัั ะฟัะพะณัะตัั ะธะทััะตะฝะธั ััะพะบะฐ
- [ ] ะะฝัะตะณัะธัะพะฒะฐัั ัะตะฐะปัะฝัะน ัะฐั ั AI ะฒะผะตััะพ ัะธะผัะปััะธะธ
- [ ] ะะพะฑะฐะฒะธัั ะฒะพะทะผะพะถะฝะพััั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ััะพะบะฐ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ัะธััะตะผั ะทะฐะบะปะฐะดะพะบ ะธ ะทะฐะผะตัะพะบ
- [ ] ะะพะฑะฐะฒะธัั ัะตััั ะธ ะฒะพะฟัะพัั ะบ ััะพะบั
