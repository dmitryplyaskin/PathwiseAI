# Система повторения на главной странице

## Описание

Реализована система отображения уроков, требующих повторения, на главной странице приложения.

## Функциональность

### Блок "Нужно повторить"

- **Расположение**: Отображается первым блоком на главной странице после кнопки "Начать изучать"
- **Фильтрация**: Показывает только уроки с `next_review_at` в пределах ближайших 5 дней
- **Сортировка**: Уроки сортируются по дате повторения (от ближайшей к дальнейшей)
- **Отображение**: Карточки уроков в виде слайдера с навигацией

### Слайдер

- **Количество элементов**: 3 карточки на слайд
- **Навигация**: Кнопки "Назад" и "Вперед" по бокам слайдера
- **Адаптивность**: Кнопки навигации скрываются, если слайдов недостаточно

### Карточки уроков

- **Заголовок**: Название урока с обрезанием текста и всплывающей подсказкой
- **Курс и раздел**: Отображение полного пути "Курс → Раздел" с обрезанием и подсказкой
- **Описание**: Обрезается до 3 строк с многоточием
- **Дата повторения**: Форматированное отображение ("Сегодня", "Завтра", "Через N дней")
- **Статус**: Чип "Повторить" с предупреждающим цветом

### Всплывающие подсказки

- **Заголовок урока**: Полное название при наведении
- **Путь к уроку**: Полный путь "Курс → Раздел" при наведении
- **Стиль**: Стрелка указывает на элемент

## Технические детали

### Файлы

- `frontend/src/pages/home/ui/HomePage.tsx` - Основная логика блока повторения
- `frontend/src/widgets/lessons-list/ui/LessonsList.tsx` - Обновленные карточки с подсказками

### Функции

- `getLessonsForReview()` - Фильтрация и сортировка уроков для повторения
- `formatReviewDate()` - Форматирование даты повторения
- `getCurrentSlideLessons()` - Получение уроков для текущего слайда
- `handlePrevSlide()` / `handleNextSlide()` - Навигация по слайдам
- `handleLessonClick()` - Навигация к уроку при клике на карточку

### Состояние

- `reviewSliderIndex` - Индекс текущего слайда
- `lessonsForReview` - Отфильтрованные уроки для повторения

## Условия отображения

Блок "Нужно повторить" отображается только если:

- Есть уроки с установленной датой повторения
- Дата повторения находится в пределах ближайших 5 дней
- Пользователь имеет доступ к урокам

## Интеграция

Система использует существующие API и типы данных:

- `lessonsApi.getAllLessons()` - Получение всех уроков
- Тип `Lesson` с полем `next_review_at`
- Навигация к урокам через `useNavigate` и маршрут `/courses/:id/units/:unitId/lessons/:lessonId`

## Исправления

### Клик по карточке урока

- **Проблема**: Карточки в блоке "Нужно повторить" не открывали урок
- **Решение**: Добавлена функция `handleLessonClick()` с правильной навигацией
- **Маршрут**: `/courses/{courseId}/units/{unitId}/lessons/{lessonId}`
