# Исправление бага с повторным прохождением теста

## Описание проблемы
При повторном прохождении теста (нажатие кнопки "Пройти снова" или запуск без изменения настроек) backend возвращал последний пройденный тест, но список вопросов для него формировался неправильно. Вместо вопросов, относящихся к конкретному тесту (экземпляру `Exam`), загружались **все** вопросы, связанные с данным уроком (`Lesson`).

Это приводило к тому, что если пользователь сначала прошел короткий тест (5 вопросов), а потом длинный (10 вопросов), или наоборот, то при повторном запуске он мог увидеть объединение всех вопросов из всех попыток, что нарушало логику повторного прохождения конкретного теста.

## Внесенные изменения

### Backend
**Файл:** `src/modules/exams/services/exams.service.ts`

**Метод:** `getOrGenerateTestForLesson`

**Изменение:**
Изменена логика получения вопросов для существующего теста.
- **Было:** Запрос к `questionRepository` для получения всех вопросов урока (`where: { lesson: { id: lessonId } }`).
- **Стало:** Извлечение вопросов непосредственно из результатов найденного экзамена (`lastExam.results`). Так как экзамен загружается с отношением `results.question`, мы имеем доступ к именно тем вопросам, которые были сгенерированы для этого конкретного прохождения.

```typescript
// Before
const existingQuestions = await this.questionRepository.find({
  where: { lesson: { id: lessonId } },
});

// After
const existingQuestions = lastExam.results.map(
  (result) => result.question,
);
```

## Как проверить
1. Пройдите тест урока (например, стандартный из 5 вопросов).
2. Завершите тест.
3. В настройках генерации (шестеренка) выберите другой режим (например, "Углубленный" - 10 вопросов) или измените типы вопросов.
4. Пройдите этот новый тест.
5. После завершения, в карточке урока нажмите кнопку "Пройти снова" (без изменения настроек).
6. **Ожидаемый результат:** Откроется тест, содержащий только вопросы из последней попытки (то есть те 10 вопросов, если последним был углубленный тест), без примеси вопросов из первой попытки.

