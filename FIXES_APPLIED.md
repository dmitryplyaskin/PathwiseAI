# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è UI –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ 1. –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –ø—Ä–æ–ø–∞–¥–∞–ª, –µ—Å–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–µ —É–∂–µ –±—ã–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**

- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ —Ç–µ–ø–µ—Ä—å **–≤—Å–µ–≥–¥–∞** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–µ (`main`)
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –≤–µ—Ç–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç —Å–Ω–æ–≤–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

```typescript
// –î–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –∫–∞–∫ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
if (threadId === 'main') {
  setMessages([
    {
      id: 'lesson-content',
      type: 'bot',
      content: lessonContent,
      threadId: 'main',
    },
    ...convertedMessages,
  ]);
} else {
  setMessages(convertedMessages);
}
```

### ‚úÖ 2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –∏–¥–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `regeneratingMessageId`
- –í–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  - üîÑ –ò–∫–æ–Ω–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–û—Ç–≤–µ—Ç –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞"
  - –¢–µ–∫—Å—Ç "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è..."
  - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç..." –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –ö–Ω–æ–ø–∫–∞ "‚ãÆ" –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –í –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è..." –≤–º–µ—Å—Ç–æ "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç"

**–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ú® –û—Ç–≤–µ—Ç –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞ üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è...‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ   –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç...          ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ 3. –£–ª—É—á—à–µ–Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –≤–µ—Ç–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏—è –±—ã–ª –Ω–µ –æ—á–µ–≤–∏–¥–µ–Ω.

**–†–µ—à–µ–Ω–∏—è:**

1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è:**
   - –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–∫—Ä–∞—à–µ–Ω–∞ –≤ –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç (`color="error"`)
   - –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Ñ–æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º —Å –±–µ–ª–æ–π –∏–∫–æ–Ω–∫–æ–π
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞ "–£–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É"

2. **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:**

   ```
   –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ç–∫–∞–º–∏
   ‚îú‚îÄ [–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: –û—Å–Ω–æ–≤–Ω–∞—è]
   ‚îî‚îÄ [–ù–æ–≤–∞—è –≤–µ—Ç–∫–∞] [‚ãÆ Badge —Å —á–∏—Å–ª–æ–º]
                        ‚Üì
                   –ú–µ–Ω—é –≤–µ—Ç–æ–∫
                   ‚îú‚îÄ –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ ‚úì
                   ‚îú‚îÄ –í–µ—Ç–∫–∞ 1 üóëÔ∏è ‚Üê –ö–†–ê–°–ù–ê–Ø –∫–Ω–æ–ø–∫–∞
                   ‚îî‚îÄ –í–µ—Ç–∫–∞ 2 üóëÔ∏è ‚Üê –ö–†–ê–°–ù–ê–Ø –∫–Ω–æ–ø–∫–∞
   ```

3. **–î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ üóëÔ∏è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏
   - –ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ–Ω–∞" –∏ –∫—Ä–∞—Å–Ω–∞—è "–£–¥–∞–ª–∏—Ç—å"

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É—Ä–æ–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–µ (`main`)
2. –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

### –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ **‚ãÆ** –Ω–∞ –ª—é–±–æ–º –æ—Ç–≤–µ—Ç–µ –ò–ò (–Ω–µ –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–µ —É—Ä–æ–∫–∞)
2. –í—ã–±–µ—Ä–∏—Ç–µ "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç"
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏:
   - –£–≤–∏–¥–∏—Ç–µ "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è..." –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç..."
4. –ù–æ–≤—ã–π –æ—Ç–≤–µ—Ç –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π

### –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –≤–µ—Ç–æ–∫ (–∏–∫–æ–Ω–∫–∞ —Å —á–∏—Å–ª–æ–º –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
2. –ù–∞–π–¥–∏—Ç–µ –≤–µ—Ç–∫—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å
3. –ù–∞–∂–º–∏—Ç–µ **–∫—Ä–∞—Å–Ω—É—é –∫–Ω–æ–ø–∫—É üóëÔ∏è** —Å–ø—Ä–∞–≤–∞ –æ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –≤–µ—Ç–∫–∏
4. –í –¥–∏–∞–ª–æ–≥–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
5. –ï—Å–ª–∏ —É–¥–∞–ª—è–µ—Ç–µ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `main`

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
const [regeneratingMessageId, setRegeneratingMessageId] = useState<
  string | null
>(null);
```

### –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```typescript
{regeneratingMessageId === msg.id ? (
  <Box>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç...</Box>
) : (
  <MarkdownRenderer>{msg.content}</MarkdownRenderer>
)}
```

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è

```typescript
<IconButton
  size="small"
  color="error"  // –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
  onClick={(e) => {
    e.stopPropagation();
    openDeleteDialog(thread.threadId);
  }}
  sx={{
    '&:hover': {
      backgroundColor: 'error.light',
      color: 'white',
    },
  }}
>
  <Delete fontSize="small" />
</IconButton>
```

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ

- ‚ùå –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –ø—Ä–æ–ø–∞–¥–∞–ª –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
- ‚ùå –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- ‚ùå –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤—ã–≥–ª—è–¥–µ–ª–∞ –∫–∞–∫ –æ–±—ã—á–Ω–∞—è —Å–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞

### –ü–æ—Å–ª–µ

- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–µ
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –Ø—Ä–∫–∞—è –∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Ä–æ–∫–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ –ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ
   - –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å - –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É - –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–µ –±—É–¥–µ—Ç
   - –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é - –∫–æ–Ω—Ç–µ–Ω—Ç —Å–Ω–æ–≤–∞ –ø–æ—è–≤–∏—Ç—Å—è

2. **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
   - –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ò–ò
   - –ù–∞–∂–º–∏—Ç–µ ‚ãÆ –Ω–∞ –æ—Ç–≤–µ—Ç–µ
   - –ù–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç"
   - –£–≤–∏–¥–∏—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
   - –ù–æ–≤—ã–π –æ—Ç–≤–µ—Ç –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π

3. **–£–¥–∞–ª–µ–Ω–∏–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É
   - –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –≤–µ—Ç–æ–∫ (–∑–Ω–∞—á–æ–∫ —Å —á–∏—Å–ª–æ–º)
   - –ù–∞–π–¥–∏—Ç–µ –∫—Ä–∞—Å–Ω—É—é –∫–Ω–æ–ø–∫—É üóëÔ∏è
   - –ù–∞–∂–º–∏—Ç–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - –í–µ—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—Å—è

## –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `frontend/src/widgets/lesson/ui/LessonPage.tsx` - –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±—ç–∫–µ–Ω–¥–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!
